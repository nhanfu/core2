{
    "Id": "0195846b-eec2-731c-a42d-8b5352227845",
    "Name": "update-exchangerate-editor",
    "Label": "Update ExchangeRate Editor",
    "ParentId": "6e63c20d-2788-4776-9da0-4cfe7c982cad",
    "Order": 0,
    "Style": "width:700px;",
    "Script": "return {\r\n    SaveAs: function (btn) {\r\n        var newEntity = JSON.parse(JSON.stringify(this.Entity));\r\n        this.Entity = newEntity;\r\n        this.Entity.Id = this.Uuid7.NewGuid();\r\n        this.Entity.FromDate = null;\r\n        this.Entity.ToDate = null;\r\n        this.Entity.PostDate = this.dayjs();\r\n        var detailGrid = this.ChildCom.find(x => x.IsListView && x.Meta.FieldName == \"ExchangeRateHistoryDetail\");\r\n        if (detailGrid && detailGrid.AllListViewItem.length > 0) {\r\n            detailGrid.AllListViewItem.forEach(row => {\r\n                row.Entity.Id = this.Uuid7.NewGuid();\r\n                row.Entity.HistoryId = this.Entity.Id;\r\n                row.Children.forEach(cell => {\r\n                    cell.Entity = row.Entity;\r\n                });\r\n                row.UpdateView(true);\r\n            });\r\n        }\r\n        this.UpdateView(true);\r\n        this.Dirty = true;\r\n        this.Toast.Success(\"Save as success\");\r\n    },\r\n    CalcRateUSD: function (btn, entity) {\r\n        var exUSD = this.Decimal(this.Entity.RateVND);\r\n        var exVND = this.Decimal(1);\r\n        entity.RateUSD = this.Decimal(1).div(entity.RateVND);\r\n        var detailGrid = this.ChildCom.find(x => x.IsListView && x.Meta.FieldName == \"ExchangeRateHistoryDetail\");\r\n        detailGrid.Item.forEach(item => {\r\n            item.Entity.RateVND = this.Decimal(item.Entity.RateVND);\r\n            item.Entity.RateUSD = item.Entity.RateVND.div(exUSD);\r\n            item.UpdateView(false, false, \"RateUSD\");\r\n        });\r\n    },\r\n    UpdateExchangeRate: function (btn, entity) {\r\n        var exUSD = this.Decimal(this.EditForm.Entity.RateVND);\r\n        var exVND = this.Decimal(1);\r\n        entity.RateVND = this.Decimal(entity.RateVND);\r\n        entity.RateUSD = entity.RateVND.div(exUSD);\r\n        btn.Parent.UpdateView(false, false, \"RateUSD\");\r\n    },\r\n    UpdateExchangeRate2: function (btn, entity) {\r\n        debugger;\r\n        var exUSD = this.Decimal(this.EditForm.Entity.RateVND);\r\n        var exVND = this.Decimal(1);\r\n        entity.RateVND = this.Decimal(JSON.parse(localStorage.getItem(\"ExchangeRateVND\"))[entity.CurrencyCode]);\r\n        entity.RateUSD = entity.RateVND.div(exUSD);\r\n        btn.Parent.UpdateView(false, false, \"RateUSD\");\r\n    }\r\n}",
    "EntityId": "ExchangeRateHistory",
    "Active": true,
    "InsertedDate": "2025-03-11T15:57:00.4386794",
    "InsertedBy": "1",
    "UpdatedDate": "2025-03-13T19:33:45.4089102",
    "UpdatedBy": "1",
    "ComponentGroup": [
        {
            "Id": "0195846b-ef45-707d-b065-ef6ad49aa6e0",
            "FieldName": "Button",
            "Order": 1,
            "ComponentType": "Section",
            "ClassName": "ribbon-group",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.5308487",
            "InsertedBy": "1",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "0195846b-ef86-72f4-a39e-5fced3f589b4",
                    "FieldName": "btnSave",
                    "Order": 1,
                    "ComponentType": "Button",
                    "ComponentGroupId": "0195846b-ef45-707d-b065-ef6ad49aa6e0",
                    "Column": 1,
                    "Label": "Save",
                    "Icon": "fal fa-save",
                    "ClassName": "btn detail-button primary",
                    "HotKey": "Ctrl-S",
                    "Events": "{ \"click\" : \"SavePatch\" }",
                    "Visibility": true,
                    "Active": true,
                    "InsertedDate": "2025-03-11T15:57:00.5928614",
                    "InsertedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                },
                {
                    "Id": "01958544-97b6-7506-a5c2-b88c0d38adc7",
                    "FieldName": "btnSaveAdd",
                    "Order": 0,
                    "ComponentType": "Button",
                    "ComponentGroupId": "0195846b-ef45-707d-b065-ef6ad49aa6e0",
                    "Column": 1,
                    "GroupFormat": "",
                    "Label": "Save As",
                    "Icon": "fas fa-sliders-h-square",
                    "ClassName": "btn detail-button secondary-outline",
                    "Events": "{\r\n    \"click\": \"SaveAs\"\r\n}",
                    "Visibility": true,
                    "Active": true,
                    "InsertedDate": "2025-03-11T19:53:54.4289235",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-11T19:54:46.5329029",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "0195846b-efc6-754c-a5c8-a7c50c2c320d",
            "FieldName": "Container ",
            "Order": 2,
            "ComponentType": "Section",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.6569655",
            "InsertedBy": "1",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "ReportTypeId": 1
        },
        {
            "Id": "0195846b-f00b-76e0-8e91-67205446602e",
            "FieldName": "Right",
            "Order": 3,
            "ComponentType": "Section",
            "ClassName": "card-body profile",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.7233494",
            "InsertedBy": "1",
            "UpdatedDate": "2025-03-11T19:28:06.7704686",
            "UpdatedBy": "1",
            "DisabledExp": "!this.Entity.Id.startsWith('-')",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "ParentId": "0195846b-efc6-754c-a5c8-a7c50c2c320d",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "0195846b-f06b-716a-b0f1-c9a7185ffa5a",
                    "FieldName": "ExchangeRateHistoryDetail",
                    "Order": 7,
                    "ComponentType": "GridView",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 12,
                    "Row": 20,
                    "CanCache": true,
                    "Label": "ExchangeRateHistoryDetail",
                    "Events": "{\r\n    \"AfterCreated\": \"UpdateExchangeRate2\"\r\n}",
                    "Visibility": true,
                    "DefaultVal": "{\r\n    \"HistoryId\": this.EditForm.Entity.Id\r\n}",
                    "Active": true,
                    "InsertedDate": "2025-03-11T15:57:00.828746",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-12T21:00:19.5670309",
                    "UpdatedBy": "1",
                    "CanAdd": true,
                    "Query": "{\r\n    \"sql\": \"select * from ExchangeRateHistoryDetail as ds where HistoryId = '{HistoryId}'\",\r\n    \"total\": \"select count(ds.Id) as total from ExchangeRateHistoryDetail as ds where HistoryId = '{HistoryId}'\"\r\n}",
                    "RefName": "ExchangeRateHistoryDetail",
                    "PreQuery": "{\r\n    \"HistoryId\": this.EditForm.Entity.Id\r\n}",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "Editable": true,
                    "GroupTypeId": "00d41484-0000-0000-8000-7725fc908bab",
                    "ReportTypeId": 1
                },
                {
                    "Id": "0195846f-ec86-72be-bdba-e7f6245a6358",
                    "FieldName": "FromDate",
                    "Order": 1,
                    "ComponentType": "Datepicker",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 3,
                    "Row": 50,
                    "Label": "From Date",
                    "ShowLabel": true,
                    "Events": "{    \"change\": \"ChangeDataFee\"}",
                    "Visibility": true,
                    "Validation": "[{\"Rule\": \"required\", \"Message\": \"{0} is required\"}]",
                    "Active": true,
                    "InsertedDate": "2025-03-11T16:01:31.0545776",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-11T18:42:12.5160437",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                },
                {
                    "Id": "0195846f-ec87-747d-9f56-a51f8d1d5cc6",
                    "FieldName": "PostDate",
                    "Order": 4,
                    "ComponentType": "Datepicker",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 3,
                    "Row": 50,
                    "Label": "Post Date",
                    "ShowLabel": true,
                    "Events": "{    \"change\": \"ChangeDataFee\"}",
                    "Disabled": true,
                    "Visibility": true,
                    "Active": true,
                    "InsertedDate": "2025-03-11T16:01:31.3267951",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-11T16:47:30.5108749",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                },
                {
                    "Id": "01958470-318a-75b1-824a-c45fd5a0bb57",
                    "FieldName": "ToDate",
                    "Order": 2,
                    "ComponentType": "Datepicker",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 3,
                    "Row": 50,
                    "Label": "To Date",
                    "ShowLabel": true,
                    "Events": "{    \"change\": \"ChangeDataFee\"}",
                    "Visibility": true,
                    "Validation": "[{\"Rule\": \"required\", \"Message\": \"{0} is required\"}]",
                    "Active": true,
                    "InsertedDate": "2025-03-11T16:02:17.5717659",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-11T18:42:16.715028",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                },
                {
                    "Id": "01958470-3bec-731e-9cba-564aa28d0c7c",
                    "FieldName": "Id",
                    "Order": 3,
                    "ComponentType": "Input",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 3,
                    "Row": 50,
                    "Label": "Ref No",
                    "ShowLabel": true,
                    "Events": "{    \"change\": \"ChangeDataFee\"}",
                    "Disabled": true,
                    "Visibility": true,
                    "Active": true,
                    "InsertedDate": "2025-03-11T16:01:47.4296087",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-11T16:47:09.2691587",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "ReportTypeId": 1
                },
                {
                    "Id": "0195854b-722d-7788-b422-0e6c05cf1a77",
                    "FieldName": "FileIds",
                    "Order": 6,
                    "ComponentType": "Dropdown",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "FormatData": "{Code}",
                    "PlainText": "Select data",
                    "Column": 9,
                    "Row": 100,
                    "Label": "File No",
                    "ShowLabel": true,
                    "Events": "{\r\n    \"change\": \"ChangeDataFee\"\r\n}",
                    "Visibility": true,
                    "Active": true,
                    "InsertedDate": "2025-03-11T20:01:31.9261277",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-12T21:00:33.293267",
                    "UpdatedBy": "1",
                    "Query": "{\r\n    \"sql\": \"select * from Shipment ds where ParentId is null\",\r\n    \"total\": \"select count(ds.Id) as total from Shipment ds where ParentId is null\"\r\n}",
                    "RefName": "Shipment",
                    "Template": "[\r\n    {\r\n        \"FieldName\": \"Code\",\r\n        \"Label\": \"Code\",\r\n        \"ComponentType\": \"Input\"\r\n    }\r\n]",
                    "PreQuery": "{\r\n    \"VendorIds\": this.Entity.VendorIds \r\n}",
                    "DisabledExp": "",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "OrderBy": "",
                    "IsMultiple": true,
                    "ReportTypeId": 1
                },
                {
                    "Id": "01958aa7-55a3-768a-88a7-11ea2f51b1bd",
                    "FieldName": "RateVND",
                    "Order": 5,
                    "ComponentType": "Number",
                    "ComponentGroupId": "0195846b-f00b-76e0-8e91-67205446602e",
                    "Column": 3,
                    "Precision": 2,
                    "Label": "USD => VND",
                    "ShowLabel": true,
                    "Events": "{\r\n    \"input\": \"CalcRateUSD\"\r\n}",
                    "Visibility": true,
                    "PopulateField": "",
                    "Active": true,
                    "InsertedDate": "2025-03-12T20:59:48.2381017",
                    "InsertedBy": "1",
                    "UpdatedDate": "2025-03-12T21:03:19.2419267",
                    "UpdatedBy": "1",
                    "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
                    "GroupTypeId": "00eb142c-0000-0000-8000-2945bf4c2c78",
                    "ReportTypeId": 1
                }
            ]
        }
    ],
    "GridPolicies": [
        {
            "Id": "01958472-61cb-74fd-ba8c-50d07602dbcd",
            "FieldName": "CurrencyId",
            "Order": 0,
            "ComponentType": "Dropdown",
            "FormatData": "{Code}",
            "PlainText": "Select data",
            "Row": 100,
            "Label": "Currency",
            "Events": "{\r\n    \"change\":\"UpdateExchangeRate2\"\r\n}",
            "Visibility": true,
            "Width": "158px",
            "Active": true,
            "InsertedDate": "2025-03-11T16:04:22.0583473",
            "InsertedBy": "1",
            "UpdatedDate": "2025-03-12T21:59:42.9890943",
            "UpdatedBy": "1",
            "Query": "{\r\n    \"sql\": \"select ds.* from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where (ds1.Name = N'Currency' and ds.Code not in ('USD','VND'))\",\r\n    \"total\": \"select count(ds.Id) as total from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where (ds1.Name = N'Currency' and ds.Code not in ('USD','VND'))\"\r\n}",
            "RefName": "MasterData",
            "Template": "[{ \"FieldName\" : \"Code\", \"Label\" : \"Currency\", \"ComponentType\" : \"Input\" }]",
            "FocusSearch": true,
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "Editable": true,
            "MinWidth": "158px",
            "MaxWidth": "158px",
            "OrderBy": "ds.Enum asc",
            "EntityId": "ExchangeRateHistoryDetail",
            "ReportTypeId": 1
        },
        {
            "Id": "01958472-61cb-74fd-ba8c-5602bd7a5917",
            "FieldName": "RateVND",
            "Order": 2,
            "ComponentType": "Number",
            "Precision": 2,
            "Label": "Rate VND",
            "Events": "{\r\n    \"input\":\"UpdateExchangeRate\"\r\n}",
            "Visibility": true,
            "Width": "186px",
            "Active": true,
            "InsertedDate": "2025-03-11T16:04:22.8932185",
            "InsertedBy": "1",
            "UpdatedDate": "2025-03-12T21:55:57.3385815",
            "UpdatedBy": "1",
            "FocusSearch": true,
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "Editable": true,
            "MinWidth": "186px",
            "MaxWidth": "186px",
            "EntityId": "ExchangeRateHistoryDetail",
            "GroupTypeId": "00eb142c-0000-0000-8000-2945bf4c2c78",
            "ReportTypeId": 1
        },
        {
            "Id": "01958472-61cb-74fd-ba8c-5a728a9ef313",
            "FieldName": "RateUSD",
            "Order": 1,
            "ComponentType": "Number",
            "Precision": 24,
            "Label": "Rate USD",
            "Visibility": true,
            "Width": "200px",
            "Active": true,
            "InsertedDate": "2025-03-11T16:04:23.9216911",
            "InsertedBy": "1",
            "UpdatedDate": "2025-03-12T21:56:03.1272376",
            "UpdatedBy": "1",
            "FocusSearch": true,
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "Editable": true,
            "MinWidth": "200px",
            "MaxWidth": "200px",
            "EntityId": "ExchangeRateHistoryDetail",
            "ReportTypeId": 1
        }
    ],
    "Components": [
        {
            "Id": "0195846b-ef86-72f4-a39e-5fced3f589b4",
            "FieldName": "btnSave",
            "Order": 1,
            "ComponentType": "Button",
            "ComponentGroupId": "0195846b-ef45-707d-b065-ef6ad49aa6e0",
            "Column": 1,
            "Label": "Save",
            "Icon": "fal fa-save",
            "ClassName": "btn detail-button primary",
            "HotKey": "Ctrl-S",
            "Events": "{ \"click\" : \"SavePatch\" }",
            "Visibility": true,
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.5928614",
            "InsertedBy": "1",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "ReportTypeId": 1
        },
        {
            "Id": "01958544-97b6-7506-a5c2-b88c0d38adc7",
            "FieldName": "btnSaveAdd",
            "Order": 0,
            "ComponentType": "Button",
            "ComponentGroupId": "0195846b-ef45-707d-b065-ef6ad49aa6e0",
            "Column": 1,
            "GroupFormat": "",
            "Label": "Save As",
            "Icon": "fas fa-sliders-h-square",
            "ClassName": "btn detail-button secondary-outline",
            "Events": "{\r\n    \"click\": \"SaveAs\"\r\n}",
            "Visibility": true,
            "Active": true,
            "InsertedDate": "2025-03-11T19:53:54.4289235",
            "InsertedBy": "1",
            "UpdatedDate": "2025-03-11T19:54:46.5329029",
            "UpdatedBy": "1",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "ReportTypeId": 1
        }
    ],
    "FeaturePolicies": [
        {
            "Id": "0F4F40BF-672C-4A31-B902-0B19396FFB4A",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "148311D9-5A22-450B-ACDC-710AF52C2355",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "00012180-0000-0000-8000-13a7a7a23b11",
            "CanRead": true,
            "CanReadAll": true,
            "CanWrite": true,
            "CanWriteAll": true,
            "CanDelete": true,
            "CanDeleteAll": true,
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1",
            "UpdatedDate": "2025-03-11T15:58:42.5406874",
            "UpdatedBy": "1"
        },
        {
            "Id": "1754032C-A1B5-4D5F-95F3-1DD61937081A",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a43b11",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "1DE61D7A-B97E-4480-A67F-C5951652219B",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba1",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "34205D19-55CE-4503-97A6-1C86910B6C12",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba2",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "7551AFEE-F212-47EF-AEB0-DEC404B95A5C",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "CUSTOMER",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "8D79756E-3D0B-41F1-800C-3AC9683EB733",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba7",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        },
        {
            "Id": "8FFC3DA3-C99F-4C72-8EE9-411936B394D8",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001fd80-0000-0000-8000-23a7c7a43ba7",
            "CanRead": true,
            "CanReadAll": true,
            "CanWrite": true,
            "CanWriteAll": true,
            "CanDelete": true,
            "CanDeleteAll": true,
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1",
            "UpdatedDate": "2025-03-11T15:58:39.5223817",
            "UpdatedBy": "1"
        },
        {
            "Id": "A2B34B6B-5490-4947-8B11-9D63879FDC71",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "0001fd80-0000-0000-8000-13a7c7a43b11",
            "CanRead": true,
            "CanReadAll": true,
            "CanWrite": true,
            "CanWriteAll": true,
            "CanDelete": true,
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1",
            "UpdatedDate": "2025-03-11T15:58:51.4883092",
            "UpdatedBy": "1"
        },
        {
            "Id": "FAF14471-CB3E-482B-B7C7-7CC46502E773",
            "FeatureId": "0195846b-eec2-731c-a42d-8b5352227845",
            "RoleId": "00012180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true,
            "InsertedDate": "2025-03-11T15:57:00.47",
            "InsertedBy": "-1"
        }
    ]
}