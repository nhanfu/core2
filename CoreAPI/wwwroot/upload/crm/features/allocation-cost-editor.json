{
    "Id": "00ae4400-0000-0000-8000-e6d51c8b6195",
    "Name": "allocation-cost-editor",
    "Label": "Allocation Cost Editor",
    "ParentId": "009b3b78-0000-0000-8000-38a9f8f617fc",
    "Order": 0,
    "Style": "width:1200px;",
    "EntityId": "ShipmentAllocation",
    "Active": true,
    "ComponentGroup": [
        {
            "Id": "00824444-0000-0000-8000-08290b7a48c8",
            "Order": 3,
            "ComponentType": "Section",
            "Icon": "fal fa-info mr-1",
            "ClassName": "card-body",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ParentId": "00ae44f8-0000-0000-8000-1e36c17d9cb2",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1
        },
        {
            "Id": "009844d8-0000-0000-8000-65bc4feecec8",
            "Order": 1,
            "ComponentType": "Section",
            "Label": "Allocation History",
            "Icon": "fal fa-info mr-1",
            "ClassName": "card-body",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ParentId": "00ae44f8-0000-0000-8000-1e36c17d9cb2",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "00284498-0000-0000-8000-86817832d9bd",
                    "FieldName": "Notes",
                    "Order": 2,
                    "ComponentType": "Textarea",
                    "ComponentGroupId": "009844d8-0000-0000-8000-65bc4feecec8",
                    "Column": 11,
                    "Row": 2,
                    "Label": "Notes",
                    "ShowLabel": true,
                    "Visibility": true,
                    "Active": true,
                    "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
                    "GroupTypeId": "00d41484-0000-0000-8000-7725fc908bab",
                    "ReportTypeId": 1
                },
                {
                    "Id": "00b74470-0000-0000-8000-9cced0515902",
                    "FieldName": "Code",
                    "Order": 1,
                    "ComponentType": "Input",
                    "ComponentGroupId": "009844d8-0000-0000-8000-65bc4feecec8",
                    "Column": 1,
                    "Label": "Ref No",
                    "ShowLabel": true,
                    "Visibility": true,
                    "Active": true,
                    "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
                    "GroupTypeId": "00d41484-0000-0000-8000-7725fc908bab",
                    "ReportTypeId": 1
                },
                {
                    "Id": "00b744d4-0000-0000-8000-ecb698f7a9ce",
                    "FieldName": "Cost",
                    "Order": 3,
                    "ComponentType": "Checkbox",
                    "ComponentGroupId": "009844d8-0000-0000-8000-65bc4feecec8",
                    "Column": 1,
                    "Label": "Cost",
                    "ShowLabel": true,
                    "Visibility": true,
                    "Active": true,
                    "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
                    "GroupTypeId": "00d41484-0000-0000-8000-7725fc908bab",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "00ae4424-0000-0000-8000-d05791ceecd5",
            "Order": 2,
            "ComponentType": "Section",
            "Label": "Fee",
            "Icon": "fal fa-info mr-1",
            "ClassName": "card-body",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ParentId": "00ae44f8-0000-0000-8000-1e36c17d9cb2",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "00e444fc-0000-0000-8000-cbed0de63631",
                    "FieldName": "ShipmentFee",
                    "Order": 2,
                    "ComponentType": "GridView",
                    "ComponentGroupId": "00ae4424-0000-0000-8000-d05791ceecd5",
                    "Column": 12,
                    "Row": 200,
                    "CanCache": true,
                    "GroupBy": "VendorId",
                    "GroupFormat": "this.Entity.Vendor.Name",
                    "Label": "ShipmentFee",
                    "ClassName": "sticky",
                    "ChildStyle": "height:350px;",
                    "Events": "{\r\n    \"BeforeCreated\": \"BeforeCreated\"\r\n}",
                    "Visibility": true,
                    "Active": true,
                    "CanAdd": true,
                    "Query": "{\r\n    \"sql\": \"select * from ShipmentFee as ds where ShipmentId = '{ShipmentId}' and TypeId = 2\",\r\n    \"total\": \"select count(ds.Id) as total from ShipmentFee as ds where ShipmentId = '{ShipmentId}' and TypeId = 2\"\r\n}",
                    "RefName": "ShipmentFee",
                    "IsSumary": true,
                    "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
                    "Editable": true,
                    "OrderBy": "ds.[Order] asc",
                    "EntityName": "ShipmentDetail",
                    "TableName": "Shipment",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "00ae4430-0000-0000-8000-50ec2da6039e",
            "FieldName": "Button",
            "Order": 1,
            "ComponentType": "Section",
            "ClassName": "ribbon-group",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "00ae44a8-0000-0000-8000-c4458a2cb325",
                    "FieldName": "btnSave",
                    "Order": 2,
                    "ComponentType": "Button",
                    "ComponentGroupId": "00ae4430-0000-0000-8000-50ec2da6039e",
                    "Column": 1,
                    "Label": "Save",
                    "Icon": "fal fa-save",
                    "ClassName": "btn detail-button primary",
                    "HotKey": "Ctrl-S",
                    "Events": "{ \"click\" : \"SavePatch\" }",
                    "Visibility": true,
                    "Active": true,
                    "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "00ae44f8-0000-0000-8000-1e36c17d9cb2",
            "FieldName": "Container ",
            "Order": 3,
            "ComponentType": "Section",
            "ClassName": "scroll-content",
            "Visibility": true,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ReportTypeId": 1
        }
    ],
    "GridPolicies": [
        {
            "Id": "00294470-0000-0000-8000-655c7163a960",
            "FieldName": "VendorId",
            "Order": 0,
            "ComponentType": "Dropdown",
            "FormatData": "{Name}",
            "PlainText": "Select data",
            "Row": 100,
            "Label": "Partner",
            "Visibility": true,
            "Width": "118px",
            "Active": true,
            "Query": "{\r\n    \"sql\": \"select *,CASE WHEN ds.Id IN ('{PartnerIds}') THEN 0 ELSE 1 END AS priority from Partner as ds where ServiceId in (1,2,3) and (TypeId not in (1,2) or TypeId is null) and ActionId = 1 and IsNoDebt = 0\",\r\n    \"total\": \"select count(ds.Id) as total from Partner as ds  where ServiceId in (1,2,3) and (TypeId not in (1,2) or TypeId is null) and ActionId = 1 and IsNoDebt = 0\"\r\n}",
            "RefName": "Partner",
            "Template": "[\r\n    {\r\n        \"FieldName\": \"Name\",\r\n        \"Label\": \"Name\",\r\n        \"ComponentType\": \"Input\",\r\n        \"MaxWidth\": \"500px\",\r\n        \"MinWidth\": \"500px\",\r\n        \"Width\": \"500px\"\r\n    },\r\n    {\r\n        \"FieldName\": \"TaxCode\",\r\n        \"Label\": \"TaxCode\",\r\n        \"ComponentType\": \"TaxCode\",\r\n        \"MaxWidth\": \"100px\",\r\n        \"MinWidth\": \"100px\",\r\n        \"Width\": \"100px\"\r\n    }\r\n]",
            "PreQuery": "{\r\n    \"PartnerIds\": [this.EditForm.ShipmentDetail.CustomerId,this.EditForm.ShipmentDetail.ShipperId,this.EditForm.ShipmentDetail.ConsigneeId,this.EditForm.Entity.AgentId,this.EditForm.Entity.VendorId].filter(x=> x).join(',')\r\n}",
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "118px",
            "MaxWidth": "118px",
            "OrderBy": "priority ASC, ds.Id ASC",
            "EntityId": "ShipmentFee",
            "EntityName": "ShipmentDetail",
            "ReportTypeId": 1
        },
        {
            "Id": "00294470-0000-0000-8001-295f9088cec2",
            "FieldName": "DescriptionId",
            "Order": 1,
            "ComponentType": "Dropdown",
            "FormatData": "{Name}",
            "PlainText": "Select data",
            "Row": 100,
            "Label": "Description",
            "Events": "{\r\n    \"change\": \"UpdateGroupFee\"\r\n}",
            "Visibility": true,
            "Width": "165px",
            "Active": true,
            "Query": "{\r\n    \"sql\": \"select * from FeeType as ds\",\r\n    \"total\": \"select count(ds.Id) as total from FeeType as ds\"\r\n}",
            "RefName": "FeeType",
            "Template": "[{ \"FieldName\" : \"Name\", \"Label\" : \"Name\", \"ComponentType\" : \"Input\" },{ \"FieldName\" : \"Description\", \"Label\" : \"Description\", \"ComponentType\" : \"Input\" },{ \"FieldName\" : \"GroupId\", \"Label\" : \"Group\", \"ComponentType\" : \"Dropdown\", \"RefName\" : \"MasterData\", \"FormatData\" : \"{Name}\" }]",
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "165px",
            "MaxWidth": "165px",
            "OrderBy": "ds.IsFreight desc",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        },
        {
            "Id": "00294470-0000-0000-8002-8ef8240868f6",
            "FieldName": "Quantity",
            "Order": 2,
            "ComponentType": "Number",
            "Precision": 3,
            "GroupFormat": "const vndItems = this.ChildrenItems\r\n    .map(x => x.Entity)\r\n    .filter(x => x.Currency.Name === 'VND');\r\n\r\nconst vndAmount = vndItems.length === 0\r\n    ? ''\r\n    : vndItems\r\n        .reduce((a, b) => a.plus(b.UnitPrice || 0), new this.Decimal(0))\r\n        .toFixed(0)\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') + ' VND';\r\n\r\nconst usdItems = this.ChildrenItems\r\n    .map(x => x.Entity)\r\n    .filter(x => x.Currency.Code != 'VND');\r\n\r\nconst usdAmount = usdItems.length === 0\r\n    ? ''\r\n    : usdItems\r\n        .reduce((a, b) => a.plus(b.UnitPrice || 0), new this.Decimal(0))\r\n        .toFixed(3)\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') + ' USD';\r\n\r\nreturn vndAmount + (usdAmount ? ' ' + usdAmount : '');",
            "Label": "Quantity",
            "Events": "{\r\n    \"input\": \"CalcPrice\"\r\n}",
            "Visibility": true,
            "Width": "102px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "102px",
            "MaxWidth": "102px",
            "EntityId": "ShipmentFee",
            "GroupTypeId": "00ec1404-0000-0000-8000-858f8a4d5181",
            "EntityName": "ShipmentDetail",
            "ReportTypeId": 1
        },
        {
            "Id": "00294470-0000-0000-8003-c10c1fde83a4",
            "FieldName": "UnitId",
            "Order": 3,
            "ComponentType": "Dropdown",
            "FormatData": "{Name}",
            "PlainText": "Select data",
            "Row": 100,
            "Label": "Unit",
            "Visibility": true,
            "Width": "90px",
            "Active": true,
            "Query": "{\r\n    \"sql\": \"select ds.* from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name in (N'Unit Type','LTL Type')\",\r\n    \"total\": \"select count(ds.Id) as total from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name in (N'Unit Type','LTL Type')\"\r\n}",
            "RefName": "MasterData",
            "Template": "[\r\n    {\r\n        \"FieldName\": \"Name\",\r\n        \"Label\": \"Name\",\r\n        \"ComponentType\": \"Input\"\r\n    },\r\n    {\r\n        \"FieldName\": \"Description\",\r\n        \"Label\": \"Description\",\r\n        \"ComponentType\": \"Input\"\r\n    }\r\n]",
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "90px",
            "MaxWidth": "90px",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        },
        {
            "Id": "00294470-0000-0000-8004-be7f86a0e420",
            "FieldName": "Amount",
            "Order": 4,
            "ComponentType": "Number",
            "Precision": 3,
            "Label": "Unit Price",
            "Events": "{\r\n    \"input\": \"CalcPrice\"\r\n}",
            "Visibility": true,
            "Width": "93px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "93px",
            "MaxWidth": "93px",
            "EntityId": "ShipmentFee",
            "GroupTypeId": "00ec1404-0000-0000-8000-858f8a4d5181",
            "EntityName": "ShipmentDetail",
            "ReportTypeId": 1
        },
        {
            "Id": "00294470-0000-0000-8005-9ce022b301f5",
            "FieldName": "Vat",
            "Order": 5,
            "ComponentType": "Number",
            "Precision": 2,
            "Label": "Vat",
            "Events": "{\r\n    \"change\": \"CalcPrice\"\r\n}",
            "Visibility": true,
            "Width": "74px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "74px",
            "MaxWidth": "74px",
            "EntityId": "ShipmentFee",
            "GroupTypeId": "00d41484-0000-0000-8000-7725fc908bab",
            "ReportTypeId": 1
        },
        {
            "Id": "002944d4-0000-0000-8000-b4ae223cffcd",
            "FieldName": "CurrencyId",
            "Order": 6,
            "ComponentType": "Dropdown",
            "FormatData": "{Code}",
            "PlainText": "Select data",
            "Row": 100,
            "Label": "Currency",
            "Events": "{\"change\":\"CheckCurrency\"}",
            "Visibility": true,
            "Width": "124px",
            "Active": true,
            "Query": "{\r\n    \"sql\": \"select ds.* from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name = N'Currency'\",\r\n    \"total\": \"select count(ds.Id) as total from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name = N'Currency'\"\r\n}",
            "RefName": "MasterData",
            "Template": "[{ \"FieldName\" : \"Code\", \"Label\" : \"Currency\", \"ComponentType\" : \"Input\" }]",
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "124px",
            "MaxWidth": "124px",
            "OrderBy": "ds.Enum asc",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        },
        {
            "Id": "002944d4-0000-0000-8001-976a318da2ff",
            "FieldName": "TotalAmountTax",
            "Order": 7,
            "ComponentType": "Number",
            "Precision": 3,
            "GroupFormat": "const vndItems = this.ChildrenItems\r\n    .map(x => x.Entity)\r\n    .filter(x => x.Currency.Name === 'VND' && x.TotalAmountTax);\r\n\r\nconst vndAmount = vndItems.length === 0\r\n    ? ''\r\n    : vndItems\r\n        .reduce((a, b) => a.plus(b.TotalAmountTax || 0), new this.Decimal(0))\r\n        .toFixed(0)\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') + ' VND';\r\n\r\nconst usdItems = this.ChildrenItems\r\n    .map(x => x.Entity)\r\n    .filter(x => x.Currency.Code != 'VND' && x.TotalAmountTax);\r\n\r\nconst usdAmount = usdItems.length === 0\r\n    ? ''\r\n    : usdItems\r\n        .reduce((a, b) => a.plus(b.TotalAmountTax || 0), new this.Decimal(0))\r\n        .toFixed(3)\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') + ' USD';\r\n\r\nreturn vndAmount + (usdAmount ? ' ' + usdAmount : '');",
            "Label": "Total",
            "Events": "{\r\n    \"input\": \"CalcUnitPrice\"\r\n}",
            "Visibility": true,
            "Width": "95px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "95px",
            "MaxWidth": "95px",
            "EntityId": "ShipmentFee",
            "GroupTypeId": "00ec1404-0000-0000-8000-858f8a4d5181",
            "EntityName": "ShipmentDetail",
            "ReportTypeId": 1
        },
        {
            "Id": "002944d4-0000-0000-8002-60be26c0fb10",
            "FieldName": "IsNoDocs",
            "Order": 9,
            "ComponentType": "Checkbox",
            "Row": 50,
            "Label": "No Docs",
            "Visibility": true,
            "Width": "76px",
            "Active": true,
            "RefName": "Terminal",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "76px",
            "MaxWidth": "76px",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        },
        {
            "Id": "002944d4-0000-0000-8003-ad5280232433",
            "FieldName": "Notes",
            "Order": 10,
            "ComponentType": "Input",
            "Precision": 3,
            "Label": "Notes",
            "Visibility": true,
            "Width": "143px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "143px",
            "MaxWidth": "143px",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        },
        {
            "Id": "002944d4-0000-0000-8004-5a572efa7fc5",
            "FieldName": "Docs",
            "Order": 11,
            "ComponentType": "Input",
            "Precision": 3,
            "Label": "Docs",
            "Visibility": true,
            "Width": "143px",
            "Active": true,
            "FocusSearch": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "Editable": true,
            "MinWidth": "143px",
            "MaxWidth": "143px",
            "EntityId": "ShipmentFee",
            "ReportTypeId": 1
        }
    ],
    "Components": [
        {
            "Id": "00ae44a8-0000-0000-8000-c4458a2cb325",
            "FieldName": "btnSave",
            "Order": 2,
            "ComponentType": "Button",
            "ComponentGroupId": "00ae4430-0000-0000-8000-50ec2da6039e",
            "Column": 1,
            "Label": "Save",
            "Icon": "fal fa-save",
            "ClassName": "btn detail-button primary",
            "HotKey": "Ctrl-S",
            "Events": "{ \"click\" : \"SavePatch\" }",
            "Visibility": true,
            "Active": true,
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "ReportTypeId": 1
        }
    ],
    "FeaturePolicies": [
        {
            "Id": "050053AD-4390-4618-B7C2-75A9C4029AF7",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001fd80-0000-0000-8000-13a7c7a43b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "127797DA-0F11-431C-9632-9BB3C840853A",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a43b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "1CCF27C8-89F5-43F5-AAA8-FB7B24F401CF",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "1FE5CD0E-511B-4944-A2B9-D1D88EC46E54",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "00012180-0000-0000-8000-13a7a7a23b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "41727C38-2E4C-4E88-9CAF-0A2EA5799403",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001fd80-0000-0000-8000-23a7c7a43ba7",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "4C3D9341-22CF-4DB0-B48C-905AEEA6FCA9",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "CUSTOMER",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "72CDE46D-8689-4BD6-98A4-C44DD51691FE",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba2",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "A1854931-A73A-468C-B17B-DE5633745895",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "00012180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "B9A32616-128B-42C4-AC59-29B28A9B4B84",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba7",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "D3516000-BA59-4FB2-A463-A9A3D21FF0F5",
            "FeatureId": "00ae4400-0000-0000-8000-e6d51c8b6195",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba1",
            "TableName": "Feature",
            "Active": true
        }
    ]
}