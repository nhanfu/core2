{
    "Id": "004f38a4-0000-0000-8000-b9846a9d3be3",
    "Name": "personal-contact-editor",
    "Label": "Personal Contact Editor",
    "ParentId": "6e63c20d-2788-4776-3332-4cfe7c982can2",
    "Order": 111,
    "Style": "width:600px",
    "Script": "return {\r\n    GetInfo: async function (component, entity) {\r\n        if (this.Entity.TaxCode == null || this.Entity.TaxCode == \"\") {\r\n            this.Toast.Warning(\"Not find taxcode\");\r\n            return;\r\n        }\r\n        this.Toast.Warning(\"Waiting search infomation by taxcode\");\r\n        const response = await fetch('https://api.vietqr.io/v2/business/' + this.Entity.TaxCode);\r\n        var data = await response.json();\r\n        if (data.data == null) {\r\n            this.Toast.Warning(\"Not find taxcode\");\r\n            return;\r\n        }\r\n        this.Entity.Name = data.data.shortName;\r\n        this.Entity.CompanyName = data.data.internationalName;\r\n        this.Entity.CompanyNameInv = data.data.name;\r\n        this.Entity.Address = data.data.address;\r\n        this.Entity.AddressInv = data.data.address;\r\n        this.UpdateView(false, false, \"Name\", \"CompanyName\", \"CompanyNameInv\", \"Address\", \"AddressInv\");\r\n        this.Toast.Success(\"Update taxcode success\")\r\n    },\r\n    ToastInfo: function (component) {\r\n        this.Toast.Success(\"Input search tax code\")\r\n    },\r\n    SendMail: function () {\r\n        if (!this.Entity.Email || this.Entity.Email == \"\") {\r\n            this.Toast.Warning(\"Email is requied\");\r\n            return;\r\n        }\r\n        var entity = {\r\n            To: this.Entity.Email,\r\n            Text: \"\",\r\n            Subject: \"\"\r\n        }\r\n        this.OpenPopup(\"sendmail-editor\", entity);\r\n    },\r\n    OnSave: function (form, gridview) {\r\n        var detail = gridview.find(x => x.IsListView && x.Meta.FieldName == \"PartnerContact\");\r\n        if ((detail && detail.AllListViewItem.length > 0)) {\r\n            var firstRow = detail.AllListViewItem[0];\r\n            if (firstRow) {\r\n                this.Entity.ContactName = firstRow.Entity.ContactName;\r\n                this.Entity.ContactPhoneNumber = firstRow.Entity.ContactPhoneNumber;\r\n                this.Entity.ContactEmail = firstRow.Entity.ContactEmail;\r\n            }\r\n        }\r\n    },\r\n    Prospect: function (form, gridview) {\r\n        this.EditForm.OpenConfig(\"Move to prospect customer!\", () => {\r\n            this.EditForm.Entity.TypeId = 2;\r\n            this.EditForm.Entity.SaleId = this.Token.UserId;\r\n            this.EditForm.Dirty = true;\r\n            this.EditForm.SavePatch(true).then(() => {\r\n                this.EditForm.Dispose();\r\n                this.OpenFrom.OpenPopup(\"prospect-editor\", this.EditForm.Entity);\r\n            });\r\n        });\r\n    },\r\n    OnSaveAdd: function (form, gridview) {\r\n        this.EditForm.TypeId = 2;\r\n\r\n    },\r\n    SaveAs: async function (btn) {\r\n        var check = await this.IsFormValid();\r\n        if (!check) {\r\n            return;\r\n        }\r\n        this.Entity.Id = this.Uuid7.NewGuid();\r\n        this.Entity.Code = null;\r\n        this.Entity.TypeId = 1;\r\n        this.Entity.ServiceId = 1;\r\n        this.Entity.SaleId = this.Token.UserId;\r\n        this.UpdateView(true);\r\n        this.Dirty = true;\r\n        this.Toast.Success(\"Save as success\");\r\n    },\r\n    OnSaveAdd: function (form, gridview) {\r\n        this.Entity = {\r\n            Id: this.Uuid7.NewGuid(),\r\n            Code: null,\r\n            ServiceId: 1,\r\n            TypeId: 1,\r\n            ActionId: 1,\r\n            SaleId: this.Token.UserId\r\n        }\r\n    }\r\n}",
    "Events": "{\r\n    \"onsave\": \"OnSave\",\r\n    \"onsaveadd\": \"OnSaveAdd\"\r\n}",
    "EntityId": "PartnerContact",
    "Active": true,
    "ComponentGroup": [
        {
            "Id": "004f3824-0000-0000-8000-24ff3413919f",
            "FieldName": "Common",
            "Order": 1,
            "ComponentType": "Section",
            "ClassName": "card-body",
            "XsCol": 6,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "ParentId": "004f3824-0000-0000-8000-76b7af40815f",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "004f3820-0000-0000-8000-fee7f20bc647",
                    "FieldName": "Note",
                    "Order": 6,
                    "ComponentType": "Textarea",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 12,
                    "Label": "Note",
                    "ShowLabel": true,
                    "Active": true,
                    "Template": "[{ \"FieldName\" : \"Name\", \"Label\" : \"Name\", \"ComponentType\" : \"Input\" }]",
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "004f3870-0000-0000-8000-798424c933fc",
                    "FieldName": "ContactEmail",
                    "Order": 3,
                    "ComponentType": "Input",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 6,
                    "Label": "Email",
                    "ShowLabel": true,
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "004f3890-0000-0000-8000-46315f774f60",
                    "FieldName": "JobTiles",
                    "Order": 4,
                    "ComponentType": "Input",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 6,
                    "Label": "Job Tiles",
                    "ShowLabel": true,
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "004f38a0-0000-0000-8000-573c783c1654",
                    "FieldName": "ContactName",
                    "Order": 1,
                    "ComponentType": "Input",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 6,
                    "Row": 50,
                    "Label": "Name",
                    "ShowLabel": true,
                    "Events": "{\"change\":\"GetInfo\"}",
                    "DefaultVal": "1989898989898989",
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "004f38b0-0000-0000-8000-769e75f52a6c",
                    "FieldName": "Birthday",
                    "Order": 5,
                    "ComponentType": "Datepicker",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 6,
                    "Label": "Birthday",
                    "ShowLabel": true,
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "004f38cc-0000-0000-8000-87f44e633b9e",
                    "FieldName": "ContactPhoneNumber",
                    "Order": 2,
                    "ComponentType": "Input",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "Column": 6,
                    "Label": "Phone Number",
                    "ShowLabel": true,
                    "DefaultVal": "11111",
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                },
                {
                    "Id": "00973890-0000-0000-8000-d9bb2a0a8164",
                    "FieldName": "GenderId",
                    "Order": 5,
                    "ComponentType": "Dropdown",
                    "ComponentGroupId": "004f3824-0000-0000-8000-24ff3413919f",
                    "FormatData": "{Name}",
                    "Column": 6,
                    "Row": 100,
                    "Label": "Sex",
                    "ShowLabel": true,
                    "Active": true,
                    "Query": "{\r\n    \"sql\": \"select ds.* from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name = N'Gender'\",\r\n    \"total\": \"select count(ds.Id) as total from [MasterData] as ds left join [MasterData] ds1 on ds.ParentId = ds1.Id where  ds1.Name = N'Gender'\"\r\n}",
                    "RefName": "MasterData",
                    "Template": "[{ \"FieldName\" : \"Name\", \"Label\" : \"Name\", \"ComponentType\" : \"Input\" }]",
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "004f3824-0000-0000-8000-76b7af40815f",
            "FieldName": "Full",
            "Order": 1,
            "ComponentType": "Section",
            "XsCol": 6,
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "ReportTypeId": 1
        },
        {
            "Id": "00503894-0000-0000-8000-807dae4d9887",
            "FieldName": "Button",
            "Order": 8,
            "ComponentType": "Section",
            "ClassName": "ribbon-group",
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "XxlOuterColumn": 12,
            "ReportTypeId": 1,
            "Components": [
                {
                    "Id": "00503854-0000-0000-8000-aea539c5b141",
                    "FieldName": "btnSave",
                    "Order": 3,
                    "ComponentType": "Button",
                    "ComponentGroupId": "00503894-0000-0000-8000-807dae4d9887",
                    "Label": "Save",
                    "Icon": "fal fa-save",
                    "ClassName": "btn detail-button primary",
                    "HotKey": "Ctrl-S",
                    "Events": "{ \"click\" : \"SavePatch\" }",
                    "Active": true,
                    "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
                    "ReportTypeId": 1
                }
            ]
        },
        {
            "Id": "0050389c-0000-0000-8000-394b10c8b903",
            "FieldName": "Center",
            "Order": 5,
            "ComponentType": "Section",
            "ClassName": "title-group",
            "Style": "margin-bottom: 0px;padding: 0;",
            "XxlCol": 12,
            "Active": true,
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "ReportTypeId": 1
        }
    ],
    "Components": [
        {
            "Id": "00503854-0000-0000-8000-aea539c5b141",
            "FieldName": "btnSave",
            "Order": 3,
            "ComponentType": "Button",
            "ComponentGroupId": "00503894-0000-0000-8000-807dae4d9887",
            "Label": "Save",
            "Icon": "fal fa-save",
            "ClassName": "btn detail-button primary",
            "HotKey": "Ctrl-S",
            "Events": "{ \"click\" : \"SavePatch\" }",
            "Active": true,
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "ReportTypeId": 1
        }
    ],
    "FeaturePolicies": [
        {
            "Id": "03620D6A-405B-4D97-B98D-913FEF5FA703",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "060ED6A8-1571-4F99-85A4-96B7DCF517F1",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba1",
            "CanRead": true,
            "CanWrite": true,
            "CanDelete": true,
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "3B9A9B09-A605-4742-BE05-80A2B68D7812",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "00012180-0000-0000-8000-13a7c7a23b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "49E7ED81-757C-4890-A78B-F7A25A0AF52F",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001f180-0000-0000-8000-13a7c7a43b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "84A808D9-4919-44F6-9E6D-FB5F09BCC273",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001fd80-0000-0000-8000-13a7c7a43b11",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "9EBB8BE7-9562-4A9D-B61F-C684E1059E30",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "CUSTOMER",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "AEAEF7FD-C7A5-4C66-95D3-2BEFDA256FD8",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba2",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "B66B74FD-D8BE-4DB2-9916-85E69B574216",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001fd80-0000-0000-8000-23a7c7a43ba7",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "BCCB1405-7FDF-4F4B-97DF-B38B464C173A",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "0001fd80-0000-0000-8000-e3a7c7a43ba7",
            "TableName": "Feature",
            "Active": true
        },
        {
            "Id": "E40C2D3B-53DF-47E9-9EE9-08E6EAAFD667",
            "FeatureId": "004f38a4-0000-0000-8000-b9846a9d3be3",
            "RoleId": "00012180-0000-0000-8000-13a7a7a23b11",
            "CanRead": true,
            "CanReadAll": true,
            "CanWrite": true,
            "CanWriteAll": true,
            "CanDelete": true,
            "CanDeleteAll": true,
            "TableName": "Feature",
            "Active": true
        }
    ]
}